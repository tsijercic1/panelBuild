(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/panel/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2267:function(e,t,n){},2791:function(e,t,n){},"297ca":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var a=n("1da1"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",["Login"!==this.$router.history.current.name?n("navigation"):e._e(),n("v-content",[n("router-view")],1),n("notifications",{attrs:{group:"main",position:"bottom right",classes:"notifications"}})],1)},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{dark:"",app:"","mini-variant":e.mini,permanent:""},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{staticClass:"py-0",attrs:{dense:"",nav:""}},[n("v-list-item",{staticClass:"px-0",attrs:{"two-line":""}},[n("v-list-item-avatar",[n("v-icon",[e._v(e._s("mdi-alpha-"+(void 0===e.user.username?"x":e.user.username.charAt(0))+"-circle")+" ")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.user.realName))]),n("v-list-item-subtitle",[e._v(e._s(e.user.username))])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[n("v-icon",[e._v("mdi-chevron-left")])],1)],1),n("v-divider"),e._l(e.items,(function(t){return n("v-list-item",{key:t.title,attrs:{to:t.link,link:""}},[n("v-list-item-icon",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),n("v-spacer"),n("v-list-item",{attrs:{to:"/login"},on:{click:e.logout}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-exit-run")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Logout")])],1)],1)],2)],1)},c=[],l=(n("d3b7"),{data:function(){return{drawer:!0,items:[{title:"Dashboard",icon:"mdi-view-dashboard",link:"/dashboard"},{title:"Courses",icon:"mdi-school",link:"/courses"},{title:"Usage Statistics",icon:"mdi-chart-areaspline-variant",link:"/statistics"},{title:"About",icon:"mdi-help-box",link:"/about"}],mini:!0,user:{}}},mounted:function(){this.user=this.$store.getters.userProfile},methods:{logout:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/services/logout.php");case 2:case"end":return e.stop()}}),e)})))()}}}),u=l,d=n("2877"),p=n("6544"),m=n.n(p),f=n("8336"),v=n("ce7e"),h=n("132d"),g=n("8860"),b=n("da13"),x=n("8270"),k=n("5d23"),y=n("34c3"),C=n("f774"),_=n("2fa4"),w=Object(d["a"])(u,o,c,!1,null,null,null),j=w.exports;m()(w,{VBtn:f["a"],VDivider:v["a"],VIcon:h["a"],VList:g["a"],VListItem:b["a"],VListItemAvatar:x["a"],VListItemContent:k["a"],VListItemIcon:y["a"],VListItemSubtitle:k["b"],VListItemTitle:k["c"],VNavigationDrawer:C["a"],VSpacer:_["a"]});var O={components:{Navigation:j}},V=O,E=(n("5c0b"),n("7496")),A=n("a75b"),T=Object(d["a"])(V,s,i,!1,null,null,null),I=T.exports;m()(T,{VApp:E["a"],VContent:A["a"]});n("b0c0");var P=n("8c4f"),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("404")])])},S=[],F=n("a523"),D={},R=Object(d["a"])(D,$,S,!1,null,null,null),N=R.exports;m()(R,{VContainer:F["a"]});var L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[e.inTheGame?n("GameBuilder"):e._e()],1)},B=[],G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("h1",[e._v(" Game lessons "),n("v-icon",{on:{click:function(t){return e.onClick("Create assignment",void 0)}}},[e._v("mdi-plus")])],1),n("v-overlay",{attrs:{value:e.overlay}},["Create assignment"===e.overlayAction?[n("CreateAssignment",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame}})]:e._e(),"Edit assignment"===e.overlayAction?[n("EditAssignment",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,categories:e.categories,assignment:e.modalItem}})]:e._e(),"Create task"===e.overlayAction?[n("CreateTask",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,categories:e.categories,assignment:e.modalItem}})]:e._e(),"Edit task"===e.overlayAction?[n("EditTask",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,categories:e.categories,assignment:e.modalItem.parent,task:e.modalItem}})]:e._e(),"Delete task"===e.overlayAction?[n("DeleteTask",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,task:e.modalItem}})]:e._e(),"Create file"===e.overlayAction?[n("CreateFile",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,task:e.modalItem}})]:e._e(),"Delete file"===e.overlayAction?[n("DeleteFile",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,file:e.modalItem,task:e.modalItem.parent}})]:e._e()],2),n("vue-context",{ref:"menu",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[null!==a&&void 0!==a?["assignment"===a.type?[n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Edit assignment",a)}}},[e._v(" Edit assignment ")])]),n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Create task",a)}}},[e._v(" Create task ")])])]:e._e(),"task"===a.type?[n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Edit task",a)}}},[e._v(" Edit task ")])]),n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Delete task",a)}}},[e._v(" Delete task ")])]),n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Create file",a)}}},[e._v(" Create file ")])])]:e._e(),"file"===a.type?[n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Delete file",a)}}},[e._v(" Delete file ")])])]:e._e()]:e._e()]}}])}),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-treeview",{attrs:{activatable:"",dense:"",hoverable:"",items:e.assignments,"return-object":"",active:e.active},on:{"update:active":[function(t){e.active=t},function(t){return e.activeChanged(e.active)}]},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item,r=t.open;return[a.isDirectory?n("v-icon",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(r?"mdi-folder-open":"mdi-folder")+" ")]):n("v-icon",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(e.fileTypes[e.extensionRegex.exec(a.name)[1]])+" ")])]}},{key:"label",fn:function(t){var a=t.item;return[n("v-list-item-title",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(a.name)+" ")])]}}])})],1),n("v-col",{attrs:{cols:"8"}},[n("v-card",{staticClass:"sticky",attrs:{tile:"",elevation:"2"}},[n("FileEditor",{ref:"fileEditor",staticClass:"editorWrapper",attrs:{service:e.service}})],1)],1)],1)],1)},M=[],K=(n("4160"),n("159b"),n("899b")),J=(n("f89b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("h3",{staticClass:"text-center mb-3"},[e._v("Create assignment")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:"",rules:[e.notEmpty]},model:{value:e.displayName,callback:function(t){e.displayName=t},expression:"displayName"}}),n("v-text-field",{attrs:{label:"Filesystem name",required:"",rules:[e.notEmpty,e.noSpaces]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{label:"Points",rules:[e.notEmpty,e.noSpaces,e.positive]},model:{value:e.points,callback:function(t){e.points=t},expression:"points"}}),n("v-text-field",{attrs:{label:"Challenge points",rules:[e.notEmpty,e.noSpaces,e.positive]},model:{value:e.challengePoints,callback:function(t){e.challengePoints=t},expression:"challengePoints"}}),n("v-checkbox",{attrs:{label:"Active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}}),n("div",{staticClass:"d-flex justify-space-between mt-5"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.create}},[e._v("Create")])],1)],1)],1)}),z=[],U=(n("c975"),{name:"CreateAssignment",props:{refresh:Function,exit:Function},data:function(){return{isProcessing:!1,name:"",displayName:"",active:!0,points:0,challengePoints:0,valid:!1,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},positive:function(e){return(e||-1)>0||"Number must not be negative"}}},methods:{create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=createAssignment",{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,displayName:e.displayName,points:e.points,challengePoints:e.challengePoints,active:e.active})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Create assignment",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Create assignment",text:"Assignment ".concat(e.displayName," created.")});case 15:case"end":return t.stop()}}),t)})))()}}}),H=U,q=n("b0af"),W=n("ac7c"),X=n("4bd4"),Y=n("8654"),Q=Object(d["a"])(H,J,z,!1,null,"1770d1e6",null),Z=Q.exports;m()(Q,{VBtn:f["a"],VCard:q["a"],VCheckbox:W["a"],VForm:X["a"],VTextField:Y["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("h3",{staticClass:"text-center mb-3"},[e._v("Edit assignment")]),n("form",[n("v-text-field",{attrs:{label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{label:"Points"},model:{value:e.points,callback:function(t){e.points=t},expression:"points"}}),n("v-text-field",{attrs:{label:"Challenge points"},model:{value:e.challengePoints,callback:function(t){e.challengePoints=t},expression:"challengePoints"}}),n("v-checkbox",{attrs:{label:"Active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}}),n("div",{staticClass:"d-flex justify-space-between mt-5"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Update")])],1)],1)])},te=[],ne={name:"EditAssignment",props:{assignment:Object,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,name:"",points:0,challengePoints:0,active:!1,valid:!1,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},positive:function(e){return(e||-1)>0||"Number must not be negative"}}},mounted:function(){this.name=this.assignment.name,this.points=this.assignment.data.points,this.challengePoints=this.assignment.data.challengePoints,this.active=this.assignment.data.active},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=editAssignment?assignmentId=".concat(e.assignment.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,points:e.points,challengePoints:e.challengePoints,active:e.active})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Edit assignment",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Edit assignment",text:"Assignment ".concat(e.name," updated.")});case 15:case"end":return t.stop()}}),t)})))()}}},ae=ne,re=Object(d["a"])(ae,ee,te,!1,null,"d046a904",null),se=re.exports;m()(re,{VBtn:f["a"],VCard:q["a"],VCheckbox:W["a"],VTextField:Y["a"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("v-card-title",{staticClass:"text-center"},[e._v("Create task")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:"",rules:[e.notEmpty]},model:{value:e.displayName,callback:function(t){e.displayName=t},expression:"displayName"}}),n("v-text-field",{attrs:{label:"Filesystem name",rules:[e.notEmpty,e.noSpaces],required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-select",{attrs:{label:"Category",items:e.categories,rules:[e.isSelected],"item-text":"name","return-object":""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("v-textarea",{attrs:{label:"Hint"},model:{value:e.hint,callback:function(t){e.hint=t},expression:"hint"}}),n("v-card-actions",{staticClass:"justify-space-between"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.create}},[e._v("Create")])],1)],1)],1)},oe=[],ce={name:"CreateTask",props:{assignment:Object,categories:Array,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,valid:!1,name:"",displayName:"",hint:"",selected:void 0,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},isSelected:function(e){return void 0!==e||"Number must not be negative"}}},methods:{create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=createTask&assignmentId=".concat(e.assignment.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,displayName:e.displayName,category:e.selected.id,hint:e.hint})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Create task",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Create task",text:"Task ".concat(e.displayName," created.")});case 15:case"end":return t.stop()}}),t)})))()}}},le=ce,ue=n("99d9"),de=n("b974"),pe=n("a844"),me=Object(d["a"])(le,ie,oe,!1,null,"5c0a22d6",null),fe=me.exports;m()(me,{VBtn:f["a"],VCard:q["a"],VCardActions:ue["a"],VCardTitle:ue["d"],VForm:X["a"],VSelect:de["a"],VTextField:Y["a"],VTextarea:pe["a"]});var ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("h3",{staticClass:"text-center mb-3"},[e._v("Edit task")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:"",rules:[e.notEmpty]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-select",{attrs:{label:"Category",items:e.categories,"item-text":"name",rules:[e.isSelected],"return-object":""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("v-textarea",{attrs:{label:"Hint"},model:{value:e.hint,callback:function(t){e.hint=t},expression:"hint"}}),n("div",{staticClass:"d-flex justify-space-between mt-5"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Update")])],1)],1)],1)},he=[],ge=(n("13d5"),{name:"EditTask",props:{assignment:Object,task:Object,categories:Array,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,name:"",hint:"",selected:void 0,valid:!1,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},isSelected:function(e){return void 0!==e||"Number must not be negative"}}},mounted:function(){var e=this;this.name=this.task.name,this.hint=this.task.data.hint;var t=this.categories.reduce((function(t,n){return n.id===e.task.data.category&&(t=n),t}),void 0);void 0===t&&(t=this.categories[0]),this.selected=t},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=editTask&taskId=".concat(e.task.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,category:e.selected.id,hint:e.hint})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Edit task",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Edit task",text:"Task ".concat(e.name," updated.")});case 15:case"end":return t.stop()}}),t)})))()}}}),be=ge,xe=Object(d["a"])(be,ve,he,!1,null,"657d0650",null),ke=xe.exports;m()(xe,{VBtn:f["a"],VCard:q["a"],VForm:X["a"],VSelect:de["a"],VTextField:Y["a"],VTextarea:pe["a"]});var ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},["none"===e.editable.type?n("v-card",{staticClass:"inner-tile",attrs:{tile:""}},[n("v-card-title",[e._v("Select a file")])],1):"html"===e.editable.type?n("v-card",{staticClass:"inner-tile",attrs:{tile:""}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.file.name))]),n("v-spacer"),n("v-checkbox",{attrs:{label:"Binary"},model:{value:e.binary,callback:function(t){e.binary=t},expression:"binary"}}),n("v-spacer"),n("v-checkbox",{attrs:{label:"Show"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),n("v-spacer"),n("v-btn",{on:{click:function(t){return e.save()}}},[e._v("Save")])],1),n("div",[n("editor",{ref:"toaster",attrs:{options:e.editorOptions,height:"75vh"}})],1)],1):e.rawEditorFileExtensions.includes(e.editable.type)?n("v-card",{attrs:{tile:""}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.file.name))]),n("v-spacer"),n("v-checkbox",{attrs:{label:"Binary"},model:{value:e.binary,callback:function(t){e.binary=t},expression:"binary"}}),n("v-spacer"),n("v-checkbox",{attrs:{label:"Show"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),n("v-spacer"),n("v-btn",{attrs:{disabled:e.isSaving},on:{click:function(t){return e.save()}}},[e._v("Save")])],1),n("div",[n("codemirror",{ref:"mirror",attrs:{options:e.cmOptions,id:"codemirror"},model:{value:e.fileContent,callback:function(t){e.fileContent=t},expression:"fileContent"}})],1)],1):e._e()],1)},Ce=[],_e=(n("99af"),n("ac1f"),n("2791"),n("4ba6"),n("f9d4"),n("b866"),n("7ba3"),n("5514"),n("693d"),n("8f94")),we=(n("10b2"),n("f513"),n("fe5f"),n("4ede")),je={name:"FileEditor",props:{service:Object},components:{codemirror:_e["codemirror"],Editor:we["Editor"]},data:function(){return{binary:!1,show:!0,fileContent:"",file:void 0,extensionRegex:/(?:\.([^.]+))?$/,editorOptions:{hideModeSwitch:!1},cmOptions:{tabSize:4,mode:"text/x-csrc",theme:"idea",lineNumbers:!0,line:!0,autoCloseBrackets:!0,viewportMargin:1/0},rawEditorFileExtensions:["c","cpp","java","js","mat","php","autotest","zadaca","json","txt","autotest2"],isSaving:!1}},computed:{editable:function(){return this.file&&!this.file.isDirectory?{type:this.extensionRegex.exec(this.file.name)[1]}:{type:"none"}}},methods:{save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSaving=!0,n="",e.$refs.toaster?n=e.$refs.toaster.invoke("getHtml"):e.$refs.mirror&&(n=e.file.content),t.next=5,fetch("/services/uup_game.php?action=editTaskFile&taskId=".concat(e.file.parent.scrapedId),{method:"put",headers:{Accept:"application/json"},body:JSON.stringify({name:e.file.name,content:n,show:e.show,binary:e.binary})});case 5:return a=t.sent,t.next=8,a.json();case 8:if(r=t.sent,e.isSaving=!1,r.success){t.next=13;break}return e.$notify({type:"bad",group:"main",title:"Save file",text:"".concat(r.message||"An error has occurred.")}),t.abrupt("return",!1);case 13:e.$notify({type:"good",group:"main",title:"Save file",text:"File ".concat(e.file.name," saved.")});case 14:case"end":return t.stop()}}),t)})))()},refresh:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$refs.toaster&&t.$refs.toaster.invoke("height","75vh"),t.file=e,!t.file||!t.file.parent){n.next=14;break}return n.next=5,fetch("/services/uup_game.php?action=getTaskFileContent&taskId=".concat(t.file.parent.scrapedId,"&name=").concat(t.file.name),{method:"get",headers:{Accept:"application/json"}});case 5:return a=n.sent,n.next=8,a.json();case 8:if(r=n.sent,r.success){n.next=11;break}return n.abrupt("return",!1);case 11:t.$refs.toaster?t.$refs.toaster.invoke("setHtml",r.data.content):t.$refs.mirror&&(t.fileContent=r.data.content),t.binary=t.file.data.binary,t.show=t.file.data.show;case 14:case"end":return n.stop()}}),n)})))()}}},Oe=je,Ve=(n("d452"),Object(d["a"])(Oe,ye,Ce,!1,null,"6d25f6d0",null)),Ee=Ve.exports;m()(Ve,{VBtn:f["a"],VCard:q["a"],VCardTitle:ue["d"],VCheckbox:W["a"],VSpacer:_["a"]});var Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Delete task")]),n("v-card-subtitle",[e._v("/"+e._s(e.task.parent.name)+"/"+e._s(e.task.name))]),n("v-card-text",[e._v("Are you sure you want to delete this task?")]),n("v-card-actions",[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Delete")])],1)],1)},Te=[],Ie={name:"DeleteTask",props:{task:Object,exit:Function,refresh:Function},data:function(){return{isProcessing:!1}},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isProcessing=!0,t.next=3,fetch("/services/uup_game.php?action=deleteTask&taskId=".concat(e.task.scrapedId),{method:"delete",headers:{Accept:"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,e.isProcessing=!1,a.success){t.next=11;break}return e.$notify({type:"bad",group:"main",title:"Delete task",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 11:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Delete task",text:"Task ".concat(e.task.name," deleted.")});case 14:case"end":return t.stop()}}),t)})))()}}},Pe=Ie,$e=Object(d["a"])(Pe,Ae,Te,!1,null,"31dc38a7",null),Se=$e.exports;m()($e,{VBtn:f["a"],VCard:q["a"],VCardActions:ue["a"],VCardSubtitle:ue["b"],VCardText:ue["c"],VCardTitle:ue["d"]});var Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Delete file")]),n("v-card-subtitle",[e._v("/"+e._s(e.task.parent.name)+"/"+e._s(e.task.name)+"/"+e._s(e.file.name))]),n("v-card-text",[e._v("Are you sure you want to delete this file?")]),n("v-card-actions",[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Delete")])],1)],1)},De=[],Re={name:"DeleteFile",props:{task:Object,file:Object,refresh:Function,exit:Function},data:function(){return{isProcessing:!1}},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isProcessing=!0,t.next=3,fetch("/services/uup_game.php?action=deleteTaskFile&taskId=".concat(e.task.scrapedId,"&name=").concat(e.file.name),{method:"delete",headers:{Accept:"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,e.isProcessing=!1,a.success){t.next=11;break}return e.$notify({type:"bad",group:"main",title:"Delete file",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 11:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Delete file",text:"File ".concat(e.name," deleted.")});case 14:case"end":return t.stop()}}),t)})))()}}},Ne=Re,Le=Object(d["a"])(Ne,Fe,De,!1,null,"55361c1f",null),Be=Le.exports;m()(Le,{VBtn:f["a"],VCard:q["a"],VCardActions:ue["a"],VCardSubtitle:ue["b"],VCardText:ue["c"],VCardTitle:ue["d"]});var Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Create file")]),n("v-form",[n("v-text-field",{attrs:{label:"Name",rules:[e.notEmpty]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-checkbox",{attrs:{label:"Show"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),n("v-checkbox",{attrs:{label:"Binary"},model:{value:e.binary,callback:function(t){e.binary=t},expression:"binary"}})],1),n("v-card-actions",[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.create}},[e._v("Create")])],1)],1)},Me=[],Ke={name:"CreateFile",props:{task:Object,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,valid:!1,binary:!1,show:!0,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"}}},methods:{create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=createTaskFile&taskId=".concat(e.task.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,show:e.show,binary:e.binary})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Create file",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Create file",text:"File ".concat(e.name," created.")});case 15:case"end":return t.stop()}}),t)})))()}}},Je=Ke,ze=Object(d["a"])(Je,Ge,Me,!1,null,"9392637a",null),Ue=ze.exports;m()(ze,{VBtn:f["a"],VCard:q["a"],VCardActions:ue["a"],VCardTitle:ue["d"],VCheckbox:W["a"],VForm:X["a"],VTextField:Y["a"]});var He={components:{CreateFile:Ue,DeleteFile:Be,DeleteTask:Se,FileEditor:Ee,EditTask:ke,CreateTask:fe,EditAssignment:se,CreateAssignment:Z,VueContext:K["a"]},name:"GameBuilder",data:function(){return{service:{name:"uup_game.php",actions:{getContent:"getTaskFileContent",saveContent:"editTaskFile"}},modalItem:void 0,overlay:!1,overlayAction:"",assignments:[],active:[],extensionRegex:/(?:\.([^.]+))?$/,fileTypes:{html:"mdi-language-html5",c:"mdi-language-c",cpp:"mdi-language-cpp",js:"mdi-nodejs",json:"mdi-code-json",md:"mdi-language-markdown",pdf:"mdi-file-pdf",png:"mdi-file-image",txt:"mdi-file-document-outline",autotest:"mdi-cog",autotest2:"mdi-cog",zadaca:"mdi-arrow-top-right-thick"},categories:[]}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshGame();case 2:case"end":return t.stop()}}),t)})))()},methods:{hideOverlay:function(){this.overlay=!1},showOverLay:function(){this.overlay=!0},activeChanged:function(e){this.file=void 0,0!==e.length&&this.treeItemClicked(e[0])},treeItemClicked:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.isDirectory||t.$refs.fileEditor.refresh(e);case 1:case"end":return n.stop()}}),n)})))()},onClick:function(e,t){this.overlayAction=e,this.modalItem=t,this.showOverLay()},fixIds:function(e,t){var n=this;e&&(null!==t&&(e.parent=t),"file"===e.type?e.id=e.path:(e.scrapedId=e.id,e.id=e.id+"."+e.type),e.children&&e.children.forEach((function(t){return n.fixIds(t,e)})))},refreshGame:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],a=[],t.next=4,fetch("/services/uup_game.php?action=getTaskCategories",{method:"get",headers:{Accept:"application/json"}});case 4:return r=t.sent,t.next=7,r.json();case 7:if(s=t.sent,s.success){t.next=10;break}return t.abrupt("return",!1);case 10:return a=s.data,t.next=13,fetch("/services/uup_game.php?action=getAssignments",{method:"get",headers:{Accept:"application/json"}});case 13:return r=t.sent,t.next=16,r.json();case 16:if(s=t.sent,s.success){t.next=19;break}return t.abrupt("return",!1);case 19:return n=s.data.children,n.forEach((function(t){return e.fixIds(t,null)})),e.assignments=n,e.categories=a,t.abrupt("return",!0);case 24:case"end":return t.stop()}}),t)})))()}}},qe=He,We=(n("c379"),n("62ad")),Xe=n("a797"),Ye=n("0fd9"),Qe=n("eb2a"),Ze=Object(d["a"])(qe,G,M,!1,null,"528e57d4",null),et=Ze.exports;m()(Ze,{VCard:q["a"],VCol:We["a"],VContainer:F["a"],VIcon:h["a"],VListItemTitle:k["c"],VOverlay:Xe["a"],VRow:Ye["a"],VTreeview:Qe["a"]});var tt={name:"Dashboard",components:{GameBuilder:et},data:function(){return{inTheGame:!1}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/services/uup_game.php?action=check");case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,e.inTheGame=a.success;case 7:case"end":return t.stop()}}),t)})))()}},nt=tt,at=Object(d["a"])(nt,L,B,!1,null,null,null),rt=at.exports;m()(at,{VContainer:F["a"]});var st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("About")])])},it=[],ot={},ct=Object(d["a"])(ot,st,it,!1,null,null,null),lt=ct.exports;m()(ct,{VContainer:F["a"]});var ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-content",{staticClass:"grey darken-4"},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs9:"",sm7:"",md5:"",lg4:""}},[n("v-card",{staticClass:"pa-10 text-center",attrs:{light:""}},[n("v-card-title",[e._v("Log in to your account")]),n("v-form",{staticClass:"my-4"},[n("v-text-field",{attrs:{light:"",label:"Username","prepend-icon":"mdi-account"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{light:"",type:"password",label:"Password","prepend-icon":"mdi-lock"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{staticClass:"mt-6",attrs:{large:"",width:"100%",dark:""},on:{click:e.login}},[e._v(" Log in ")])],1),e.showError?n("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()],1)],1)],1)],1)],1)],1)},dt=[],pt={name:"Login",data:function(){return{showError:!1,errorMessage:"",username:void 0,password:void 0}},methods:{login:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.username,n=this.password,e.next=3,this.$store.dispatch("login",{username:t,password:n});case 3:if(a=e.sent,!0!==a.success){e.next=9;break}return e.next=7,this.$router.push({name:"Dashboard"});case 7:e.next=12;break;case 9:this.showError=!0,this.errorMessage=a.message,setTimeout((function(){return r.hideError()}),5e3);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideError:function(){this.showError=!1,this.errorMessage=""}}},mt=pt,ft=n("0798"),vt=n("0e8f"),ht=n("a722"),gt=Object(d["a"])(mt,ut,dt,!1,null,null,null),bt=gt.exports;m()(gt,{VAlert:ft["a"],VApp:E["a"],VBtn:f["a"],VCard:q["a"],VCardTitle:ue["d"],VContainer:F["a"],VContent:A["a"],VFlex:vt["a"],VForm:X["a"],VLayout:ht["a"],VTextField:Y["a"]});var xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("Courses")]),n("v-container",e._l(e.courses,(function(e){return n("CourseCard",{key:e.id,attrs:{course:e}})})),1)],1)},kt=[],yt=n("5530"),Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mb-5",attrs:{"min-width":"240",elevation:"4"}},[n("v-card-title",{staticClass:"title text-sm-center"},[n("router-link",{attrs:{to:e.courseLink(e.course.id)}},[e._v(e._s(e.course.name))])],1),n("v-divider"),n("v-card",[n("v-card-title",{staticClass:"subtitle-1 justify-center"},[e._v("Groups")]),n("v-divider"),n("v-row",{staticClass:"pa-3"},e._l(e.course.groups,(function(t){return n("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-card",{staticClass:"pa-3 subtitle-2",attrs:{outlined:"",tile:"",to:e.groupLink(t.id)}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],1),n("v-expansion-panels",[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("Assignments")]),n("v-expansion-panel-content",[n("v-row",{staticClass:"pa-3"},e._l(e.assignments,(function(t){return n("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-card",{staticClass:"pa-3 subtitle-2",attrs:{outlined:"",tile:"",to:e.assignmentsLink()}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],1)],1)],1)],1)},_t=[],wt={name:"CourseCard",props:["course"],methods:{groupLink:function(e){return"".concat(this.courseLink(this.course.id),"/groups/").concat(e)},courseLink:function(e){return"/courses/".concat(e)},assignmentsLink:function(){return"/assignments/".concat(this.course.id)}},mounted:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},computed:{assignments:function(){var e=this.$store.getters.assignmentsForCourse(this.course);return e=void 0===e?[]:e.children,e}}},jt=wt,Ot=n("cd55"),Vt=n("49e2"),Et=n("c865"),At=n("0393"),Tt=Object(d["a"])(jt,Ct,_t,!1,null,null,null),It=Tt.exports;m()(Tt,{VCard:q["a"],VCardTitle:ue["d"],VCol:We["a"],VDivider:v["a"],VExpansionPanel:Ot["a"],VExpansionPanelContent:Vt["a"],VExpansionPanelHeader:Et["a"],VExpansionPanels:At["a"],VRow:Ye["a"]});var Pt=n("2f62"),$t={name:"Courses",components:{CourseCard:It},computed:Object(yt["a"])({},Object(Pt["b"])(["courses"])),mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("refreshCourses");case 2:return t.next=4,e.$store.dispatch("refreshAssignments");case 4:case"end":return t.stop()}}),t)})))()}},St=$t,Ft=Object(d["a"])(St,xt,kt,!1,null,null,null),Dt=Ft.exports;m()(Ft,{VContainer:F["a"]});var Rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",{staticClass:"mb-4"},[e._v(e._s(void 0===e.course.name?"":e.course.name))]),n("v-expansion-panels",{attrs:{accordion:!1,popout:!0,inset:!1,multiple:!1,focusable:!0,disabled:!1,readonly:!1,flat:!1,hover:!0,tile:!1}},e._l(e.groupsForCourseId(e.course.id),(function(t){return n("v-expansion-panel",{key:t.id},[n("v-expansion-panel-header",[e._v(e._s(t.name))]),n("v-expansion-panel-content",[n("v-row",{staticClass:"pa-3"},e._l(Object.keys(e.membersOfGroupByGroupIdAndCourseId(e.course.id,t.id)),(function(a){return n("v-col",{key:a,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-card",{staticClass:"pa-3 subtitle-2",attrs:{outlined:"",tile:""}},[e._v(" "+e._s(t.members[a])+" ")])],1)})),1)],1)],1)})),1)],1)},Nt=[],Lt={data:function(){return{connection:{}}},computed:Object(yt["a"])(Object(yt["a"])({},Object(Pt["b"])(["membersOfGroupByGroupIdAndCourseId","groupsForCourseId"])),{},{course:function(){return this.$store.getters.courseById(this.$route.params.course_id)}}),mounted:function(){this.$store.dispatch("refreshMembers",[this.course,this])},created:function(){}},Bt=Lt,Gt=Object(d["a"])(Bt,Rt,Nt,!1,null,null,null),Mt=Gt.exports;m()(Gt,{VCard:q["a"],VCol:We["a"],VContainer:F["a"],VExpansionPanel:Ot["a"],VExpansionPanelContent:Vt["a"],VExpansionPanelHeader:Et["a"],VExpansionPanels:At["a"],VRow:Ye["a"]});var Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("Statistics")])])},Jt=[],zt={},Ut=Object(d["a"])(zt,Kt,Jt,!1,null,null,null),Ht=Ut.exports;m()(Ut,{VContainer:F["a"]});var qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("Group "+e._s(e.$route.params.group_id))]),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"single-expand":e.singleExpand,expanded:e.expanded,"item-key":"name","show-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Group "+e._s(e.$route.params.group_id))]),n("v-spacer"),n("v-switch",{staticClass:"mt-2",attrs:{label:"Single expand"},model:{value:e.singleExpand,callback:function(t){e.singleExpand=t},expression:"singleExpand"}})],1)]},proxy:!0},{key:"expanded-item",fn:function(t){var a=t.headers,r=t.item;return[n("td",{attrs:{colspan:a.length}},[e._v("More info about "+e._s(r.name))])]}}])})],1)},Wt=[],Xt={computed:{expanded:[],singleExpand:!1,headers:[{text:"Dessert (100g serving)",align:"start",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Iron (%)",value:"iron"},{text:"",value:"data-table-expand"}],desserts:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,iron:"1%"},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3,iron:"1%"},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6,iron:"7%"},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3,iron:"8%"},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9,iron:"16%"},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0,iron:"0%"},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0,iron:"2%"},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5,iron:"45%"},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9,iron:"22%"},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7,iron:"6%"}]}},Yt=Xt,Qt=n("8fea"),Zt=n("b73d"),en=n("71d9"),tn=n("2a7f"),nn=Object(d["a"])(Yt,qt,Wt,!1,null,null,null),an=nn.exports;m()(nn,{VContainer:F["a"],VDataTable:Qt["a"],VSpacer:_["a"],VSwitch:Zt["a"],VToolbar:en["a"],VToolbarTitle:tn["a"]});var rn={state:{userId:void 0,sessionId:void 0,profile:{}},mutations:{setUserId:function(e,t){e.userId=t},setSessionId:function(e,t){e.sessionId=t},setProfile:function(e,t){e.profile=Object(yt["a"])(Object(yt["a"])({},e.profile),t)}},getters:{isAuthenticated:function(e){return void 0!==e.sessionId},userProfile:function(e){return e.profile}},actions:{login:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.username,r=n.password,e.next=3,fetch("/services/auth.php",{method:"post",body:"login=".concat(encodeURIComponent(a),"&password=").concat(encodeURIComponent(r)),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});case 3:return s=e.sent,e.next=6,s.json();case 6:if(i=e.sent,!0!==i.success&&"true"!==i.success||"admin"!==i.role&&"sysadmin"!==i.role){e.next=21;break}return t.commit("setUserId",1),t.commit("setSessionId",i["sid"]),t.commit("setProfile",{username:a,realName:""}),e.next=13,fetch("/services/users.php?user=".concat(a),{method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});case 13:return o=e.sent,e.next=16,o.json();case 16:return c=e.sent,!0!==c.success&&"true"!==c.success||t.commit("setProfile",{realName:c.data.realname}),e.abrupt("return",{success:i.success});case 21:return i.success&&"student"===i.role&&(i.message="Nedozvoljen pristup"),e.abrupt("return",{success:!1,message:i.message});case 23:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/services/refresh.php");case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,!0!==a.success&&"true"!==a.success||"admin"!==a.role&&"sysadmin"!==a.role){e.next=20;break}return t.commit("setUserId",1),t.commit("setSessionId",a["sid"]),t.commit("setProfile",{username:a.username,realName:""}),e.next=12,fetch("/services/users.php?user=".concat(a.username),{method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});case 12:return r=e.sent,e.next=15,r.json();case 15:return s=e.sent,!0!==s.success&&"true"!==s.success||t.commit("setProfile",{realName:s.data.realname}),e.abrupt("return",{success:a.success});case 20:return a.success&&"student"===a.role&&(a.message="Nedozvoljen pristup"),e.abrupt("return",{success:!1,message:a.message});case 22:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},sn=(n("4de4"),n("b85c")),on=n("3835"),cn={state:{courses:[]},mutations:{setCourses:function(e,t){e.courses=t},updateCourse:function(e,t){var n=Object(on["a"])(t,3),a=n[0],r=n[1],s=n[2],i=e.courses.filter((function(e){return e.id===a}));0!==i.length&&(i[0].groups=r.groups,s.$forceUpdate())}},getters:{courses:function(e){return e.courses},courseById:function(e){return function(t){return e.courses.filter((function(e){return e.id+""===t}))[0]}},groupsForCourseId:function(e){return function(t){return e.courses.filter((function(e){return e.id===t}))[0].groups||[]}},membersOfGroupByGroupIdAndCourseId:function(e){return function(t,n){return e.courses.filter((function(e){return e.id===t}))[0].groups.filter((function(e){return e.id===n}))[0].members||{}}}},actions:{refreshMembers:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,l,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=Object(on["a"])(t,2),r=a[0],s=a[1],i=Object(sn["a"])(r.groups),n.prev=2,i.s();case 4:if((o=i.n()).done){n.next=18;break}return c=o.value,n.next=8,fetch("/services/courses.php?course_id=".concat(r.id,"&group_id=").concat(c.id,"&members"),{method:"get",headers:{Accept:"application/json"}});case 8:return l=n.sent,n.next=11,l.json();case 11:if(u=n.sent,console.log(u.success),u.success){n.next=15;break}return n.abrupt("return",!1);case 15:c.members=u.data.members;case 16:n.next=4;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n["catch"](2),i.e(n.t0);case 23:return n.prev=23,i.f(),n.finish(23);case 26:e.commit("updateCourse",[r.id,r,s]);case 27:case"end":return n.stop()}}),n,null,[[2,20,23,26]])})))()},refreshCourses:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,i,o,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/services/courses.php",{method:"get",headers:{Accept:"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:if(a=t.sent,a.success){t.next=8;break}return t.abrupt("return",!1);case 8:r=a.data,s=Object(sn["a"])(r),t.prev=10,s.s();case 12:if((i=s.n()).done){t.next=25;break}return o=i.value,t.next=16,fetch("/services/courses.php?course_id=".concat(o.id,"&groups"),{method:"get",headers:{Accept:"application/json"}});case 16:return c=t.sent,t.next=19,c.json();case 19:if(l=t.sent,l.success){t.next=22;break}return t.abrupt("return",!1);case 22:o.groups=l.data.groups;case 23:t.next=12;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](10),s.e(t.t0);case 30:return t.prev=30,s.f(),t.finish(30);case 33:e.commit("setCourses",r);case 34:case"end":return t.stop()}}),t,null,[[10,27,30,33]])})))()}}},ln={recursiveIdAddition:function(e,t){if(this.hasKey(e,"id")){if(this.hasKey(e,"children")){var n,a=Object(sn["a"])(e.children);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.recursiveIdAddition(r,t)}}catch(c){a.e(c)}finally{a.f()}}}else if(e.id=e.name+"_"+t.value,t.value=t.value+1,this.hasKey(e,"children")){var s,i=Object(sn["a"])(e.children);try{for(i.s();!(s=i.n()).done;){var o=s.value;this.recursiveIdAddition(o,t)}}catch(c){i.e(c)}finally{i.f()}}},hasKey:function(e,t){return{}.hasOwnProperty.call(e,t)},getFullCourseId:function(e){return(e.external?"X":"")+e.id+"_"+e.year},tweakAssignmentTree:function(e){var t={value:1};return this.recursiveIdAddition(e,t),e}},un={state:{assignments:{}},mutations:{setAssignments:function(e,t){e.assignments=t}},getters:{assignments:function(e){return e.assignments},assignmentById:function(e){return function(t){return e.assignments.filter((function(e){return e.id+""===t}))[0]}},assignmentsForCourse:function(e){return function(t){return e.assignments[ln.getFullCourseId(t)]}}},actions:{refreshAssignments:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={},a=e.getters.courses,r=Object(sn["a"])(a),t.prev=3,r.s();case 5:if((s=r.n()).done){t.next=19;break}return i=s.value,t.next=9,fetch("/services/assignments.php?action=getAssignments&course_id=".concat(i.id).concat(i.external?"&X":"","&year=").concat(i.year),{method:"get",headers:{Accept:"application/json"}});case 9:return o=t.sent,t.next=12,o.json();case 12:if(c=t.sent,console.log(c),c.success){t.next=16;break}return t.abrupt("return",!1);case 16:n[ln.getFullCourseId(i)]=ln.tweakAssignmentTree(c.data);case 17:t.next=5;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](3),r.e(t.t0);case 24:return t.prev=24,r.f(),t.finish(24);case 27:e.commit("setAssignments",n);case 28:case"end":return t.stop()}}),t,null,[[3,21,24,27]])})))()}}},dn=(n("fb6a"),n("4f96")),pn={state:{statistics:{}},mutations:{addCourse:function(e,t){ln.hasKey(e.statistics,t)||(e.statistics[t]={})},addStudentToCourse:function(e,t){var n=t.course,a=t.student;ln.hasKey(e.statistics,n)&&!ln.hasKey(e.statistics[n],a)&&(e.statistics[n][a]={})},addInfoToCourseSubPath:function(e,t){var n=t.pathArray,a=t.student,r=t.info,s=n[0];if(ln.hasKey(e.statistics,s)&&ln.hasKey(e.statistics[s],a)){var i=e.statistics[s][a];if(i.path=s,n.length>1){var o,c=Object(dn["a"])(n),l=c.slice(1),u=Object(sn["a"])(l);try{for(u.s();!(o=u.n()).done;){var d=o.value;ln.hasKey(i,"assignments")||(i.assignments={}),ln.hasKey(i.assignments,d)||(i.assignments[d]={path:i.path+"/"+d}),i=i.assignments[d]}}catch(p){u.e(p)}finally{u.f()}}i.assignments=r.assignments,i.stats=r.stats,i.lastAccess=r.lastAccess}}},getters:{}};r["default"].use(Pt["a"]);var mn=new Pt["a"].Store({state:{},mutations:{},actions:{},modules:{AuthStore:rn,CourseStore:cn,AssignmentStore:un,AssignmentProgressStore:pn}}),fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("Assignments")]),n("div",[n("vue-context",{ref:"menu",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[null!==a&&void 0!==a?[n("li",[e.assignmentEligible(a)?n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Add assignment",a)}}},[e._v(" Add assignment ")]):e._e(),e.fileEligible(a)?n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Add file",a)}}},[e._v(" Add file ")]):e._e()]),n("li",[a.isDirectory?n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Edit assignment",a)}}},[e._v(" Edit assignment ")]):n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Edit file",a)}}},[e._v(" Edit file ")])]),n("li",[a.isDirectory?n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Delete assignment",a)}}},[e._v(" Delete assignment ")]):n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Delete file",a)}}},[e._v(" Delete file ")])])]:e._e()]}}])})],1),n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{md:"3"}},[n("v-treeview",{attrs:{activatable:"",dense:"",hoverable:"",items:e.assignments,"return-object":"",active:e.active},on:{"update:active":[function(t){e.active=t},function(t){return e.activeChanged(e.active)}]},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item,r=t.open;return[a.isDirectory?n("v-icon",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(r?"mdi-folder-open":"mdi-folder")+" ")]):n("v-icon",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(e.fileTypes[e.extensionRegex.exec(a.name)[1]])+" ")])]}},{key:"label",fn:function(t){var a=t.item;return[n("v-list-item-title",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(a.name)+" ")])]}}])})],1),n("v-col",{staticClass:"sidebar-container",attrs:{md:"9"}},[n("div",{staticClass:"sticky"},["none"===e.editorType?n("v-card",{staticClass:"inner-tile",attrs:{tile:""}},[n("v-card-title",[e._v("Select a file or an assignment/task")])],1):"html"===e.editorType.type?n("v-card",{staticClass:"inner-tile",attrs:{tile:""}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(this.active[0].name))]),n("v-spacer"),n("v-btn",{on:{click:function(t){return e.saveFile()}}},[e._v("Save")])],1),n("div",{staticClass:"editorWrapper"},[n("editor",{ref:"toaster",attrs:{initialValue:e.editorText,options:e.editorOptions,height:"100%"}})],1)],1):e.rawEditorFileExtensions.includes(e.editorType.type)?n("v-card",{staticClass:"inner-tile",attrs:{tile:""}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(this.active[0].name))]),n("v-spacer"),n("v-btn",{on:{click:function(t){return e.saveFile()}}},[e._v("Save")])],1),n("div",{staticClass:"editorWrapper"},[n("codemirror",{ref:"mirror",attrs:{options:e.cmOptions,id:"codemirror"},model:{value:e.editorText,callback:function(t){e.editorText=t},expression:"editorText"}})],1)],1):e._e()],1)])],1)],1)],1)},vn=[],hn=(n("caad"),{components:{editor:we["Editor"],codemirror:_e["codemirror"],VueContext:K["a"]},mounted:function(){},data:function(){return{extensionRegex:/(?:\.([^.]+))?$/,fileTypes:{html:"mdi-language-html5",c:"mdi-language-c",cpp:"mdi-language-cpp",js:"mdi-nodejs",json:"mdi-code-json",md:"mdi-language-markdown",pdf:"mdi-file-pdf",png:"mdi-file-image",txt:"mdi-file-document-outline",autotest:"mdi-cog",autotest2:"mdi-cog",zadaca:"mdi-arrow-top-right-thick"},globalIdCounter:1,rawEditorFileExtensions:["c","cpp","java","js","mat","php","autotest","zadaca","json","txt","autotest2"],active:[],editorText:"This is initialValue.",editorOptions:{hideModeSwitch:!1},language:"x-csrc",code:"",cmOptions:{tabSize:4,mode:"text/x-csrc",theme:"idea",lineNumbers:!0,line:!0,autoCloseBrackets:!0,viewportMargin:1/0}}},computed:Object(yt["a"])(Object(yt["a"])({},Object(Pt["b"])(["courseById","assignmentsForCourse"])),{},{activeSelections:function(){return this.active},assignments:function(){var e=this.$route.params.course_id,t=this.courseById(e),n=this.assignmentsForCourse(t);return n=void 0===n?[]:n.children,n},editorType:function(){if(0!==this.active.length){var e=this.active[0];return e.isDirectory?"none":{type:this.extensionRegex.exec(e.name)[1]}}return"none"},sidebarContent:function(e){return e}}),methods:{assignmentEligible:function(e){var t=!0;return e.isDirectory||(t=!1),e.children&&e.children.forEach((function(e){e.isDirectory||(t=!1)})),t},fileEligible:function(e){var t=!0;return e.isDirectory||(t=!1),e.children&&e.children.forEach((function(e){e.isDirectory&&(t=!1)})),t},onClick:function(e,t){alert('You clicked "'.concat(e,'"!')),console.log(t)},treeAction:function(e){console.log(e)},saveFile:function(){console.log(this.editorText)},activeChanged:function(e){0!==e.length&&this.treeItemClicked(e[0])},treeItemClicked:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isDirectory){n.next=40;break}return a=t.$route.params.course_id,r=t.courseById(a),console.log(r),n.next=6,fetch("/services/assignments.php?action=getFileContent&course_id=".concat(r.id).concat(r.external?"&X":"","&year=").concat(r.year),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({path:e.path})});case 6:return s=n.sent,n.next=9,s.json();case 9:if(s=n.sent,!s.success){n.next=37;break}if(i=s.data.content,!t.$refs.mirror){n.next=35;break}if(console.log(t.$refs.mirror),o=t.$refs.mirror,o.$refs.textarea&&(o.$refs.textarea.rows=60),n.prev=16,!["autotest","autotest2","json","zadaca"].includes(t.extensionRegex.exec(e.name)[1])){n.next=27;break}return n.t0=JSON,n.next=21,JSON.parse(i);case 21:return n.t1=n.sent,n.next=24,n.t0.stringify.call(n.t0,n.t1,null,4);case 24:i=n.sent,n.next=28;break;case 27:console.log("Nije json!");case 28:n.next=33;break;case 30:n.prev=30,n.t2=n["catch"](16),console.log("Nije validan json!");case 33:n.next=36;break;case 35:t.$refs.toaster&&t.$refs.toaster.invoke("setHtml",i);case 36:t.editorText=i;case 37:console.log("FILE: "+e.name),n.next=42;break;case 40:t.editorText="",console.log("FOLDER: "+e.name);case 42:case"end":return n.stop()}}),n,null,[[16,30]])})))()},findInTree:function(e,t){var n=this;if(e.id===t.id&&e.name===t.name)return{name:e.name,success:!0};if(!e.children)return!1;var a=!1;return e.children.forEach((function(r){var s=n.findInTree(r,t);!0===s.success&&(s.path||(s.path=e.path),a=s)})),a}}}),gn=hn,bn=(n("fb81"),Object(d["a"])(gn,fn,vn,!1,null,"5560e9ba",null)),xn=bn.exports;m()(bn,{VBtn:f["a"],VCard:q["a"],VCardTitle:ue["d"],VCol:We["a"],VContainer:F["a"],VIcon:h["a"],VListItemTitle:k["c"],VRow:Ye["a"],VSpacer:_["a"],VTreeview:Qe["a"]}),r["default"].use(P["a"]);var kn=[{path:"/dashboard",name:"Dashboard",component:rt},{path:"/",name:"Dashboard",component:rt},{path:"/about",name:"About",component:lt},{path:"/login",name:"Login",component:bt},{path:"/courses",name:"Courses",component:Dt},{path:"/courses/:course_id",name:"Course",component:Mt},{path:"/courses/:course_id/groups/:group_id",name:"Group",component:an},{path:"/assignments/:course_id",name:"Assignments",component:xn},{path:"/statistics",name:"Statistics",component:Ht},{path:"*",name:"NotFound",component:N}],yn=new P["a"]({mode:"history",base:"/panel/",routes:kn});yn.beforeEach((function(e,t,n){"Login"===e.name||mn.getters.isAuthenticated?n():(console.log("before "+e.fullPath),n(bt))}));var Cn=yn,_n=n("f309");r["default"].use(_n["a"]);var wn=new _n["a"]({}),jn=(n("d1e78"),n("ee98")),On=n.n(jn);r["default"].use(On.a),r["default"].config.productionTip=!1;var Vn=void 0;Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,mn.dispatch("refresh");case 2:Vn=new r["default"]({router:Cn,store:mn,vuetify:wn,render:function(e){return e(I)}}).$mount("#app"),mn.app=Vn,mn.$notify=Vn.$notify;case 5:case"end":return e.stop()}}),e)})))()},"5c0b":function(e,t,n){"use strict";var a=n("7694"),r=n.n(a);r.a},"5da4":function(e,t,n){},7694:function(e,t,n){},c379:function(e,t,n){"use strict";var a=n("2267"),r=n.n(a);r.a},d452:function(e,t,n){"use strict";var a=n("297ca"),r=n.n(a);r.a},fb81:function(e,t,n){"use strict";var a=n("5da4"),r=n.n(a);r.a}});
//# sourceMappingURL=app.988cb77b.js.map