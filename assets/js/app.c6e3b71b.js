(function(e){function t(t){for(var a,r,o=t[0],c=t[1],u=t[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==s[o]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},s={app:0},i=[];function o(e){return c.p+"assets/js/"+({}[e]||e)+"."+{"chunk-0453668e":"ed1d35ff","chunk-2d0ccbaa":"c49da98f","chunk-2d22d746":"db705df2","chunk-2d237ec0":"ba8b3271","chunk-7254f589":"543ea99b","chunk-72c803e5":"4301d54c"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-0453668e":1,"chunk-7254f589":1,"chunk-72c803e5":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="assets/css/"+({}[e]||e)+"."+{"chunk-0453668e":"14aa5fe3","chunk-2d0ccbaa":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-2d237ec0":"31d6cfe0","chunk-7254f589":"572b7a25","chunk-72c803e5":"572b7a25"}[e]+".css",s=c.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===a||l===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],m.parentNode.removeChild(m),n(i)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}s[e]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/panel/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var m=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2791:function(e,t,n){},"32b6":function(e,t,n){},"46de":function(e,t,n){"use strict";var a=n("32b6"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var a=n("1da1"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",["Login"!==this.$router.history.current.name?n("navigation"):e._e(),n("v-content",[n("router-view")],1),n("notifications",{attrs:{group:"main",position:"bottom right",classes:"notifications"}})],1)},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{dark:"",app:"","mini-variant":e.mini,permanent:""},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{staticClass:"py-0",attrs:{dense:"",nav:""}},[n("v-list-item",{staticClass:"px-0",attrs:{"two-line":""}},[n("v-list-item-avatar",[n("v-icon",[e._v(e._s("mdi-alpha-"+(void 0===e.user.username?"x":e.user.username.charAt(0))+"-circle")+" ")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.user.realName))]),n("v-list-item-subtitle",[e._v(e._s(e.user.username))])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[n("v-icon",[e._v("mdi-chevron-left")])],1)],1),n("v-divider"),e._l(e.items,(function(t){return n("v-list-item",{key:t.title,attrs:{to:t.link,link:""}},[n("v-list-item-icon",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),n("v-spacer"),n("v-list-item",{on:{click:e.logout}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-exit-run")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Logout")])],1)],1)],2)],1)},c=[],u=(n("d3b7"),{data:function(){return{drawer:!0,items:[{title:"Dashboard",icon:"mdi-view-dashboard",link:"/dashboard"},{title:"Courses",icon:"mdi-school",link:"/courses"},{title:"Usage Statistics",icon:"mdi-chart-areaspline-variant",link:"/statistics"},{title:"About",icon:"mdi-help-box",link:"/about"}],mini:!0,user:{}}},mounted:function(){this.user=this.$store.getters.userProfile},methods:{logout:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/services/logout.php");case 2:return t.next=4,e.$router.push("/login");case 4:case"end":return t.stop()}}),t)})))()}}}),l=u,d=n("2877"),m=n("6544"),p=n.n(m),f=n("8336"),v=n("ce7e"),h=n("132d"),g=n("8860"),b=n("da13"),x=n("8270"),y=n("5d23"),k=n("34c3"),w=n("f774"),C=n("2fa4"),_=Object(d["a"])(l,o,c,!1,null,null,null),j=_.exports;p()(_,{VBtn:f["a"],VDivider:v["a"],VIcon:h["a"],VList:g["a"],VListItem:b["a"],VListItemAvatar:x["a"],VListItemContent:y["a"],VListItemIcon:k["a"],VListItemSubtitle:y["b"],VListItemTitle:y["c"],VNavigationDrawer:w["a"],VSpacer:C["a"]});var O={components:{Navigation:j}},A=O,V=(n("5c0b"),n("7496")),E=n("a75b"),I=Object(d["a"])(A,s,i,!1,null,null,null),S=I.exports;p()(I,{VApp:V["a"],VContent:E["a"]});n("b0c0");var P=n("8c4f"),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("404")])])},$=[],N=n("a523"),F={},R=Object(d["a"])(F,T,$,!1,null,null,null),D=R.exports;p()(R,{VContainer:N["a"]});var G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[e.inTheGame?n("GameBuilder"):e._e()],1)},B=[],L=(n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("h1",[e._v(" Game lessons "),n("v-icon",{on:{click:function(t){return e.onClick("Create assignment",void 0)}}},[e._v("mdi-plus")])],1),n("v-overlay",{attrs:{value:e.overlay}},["Create assignment"===e.overlayAction?[n("CreateAssignment",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame}})]:e._e(),"Edit assignment"===e.overlayAction?[n("EditAssignment",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,categories:e.categories,assignment:e.modalItem}})]:e._e(),"Create task"===e.overlayAction?[n("CreateTask",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,categories:e.categories,assignment:e.modalItem}})]:e._e(),"Edit task"===e.overlayAction?[n("EditTask",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,categories:e.categories,assignment:e.modalItem.parent,task:e.modalItem}})]:e._e(),"Delete task"===e.overlayAction?[n("DeleteTask",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,task:e.modalItem}})]:e._e(),"Create file"===e.overlayAction?[n("CreateFile",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,task:e.modalItem}})]:e._e(),"Delete file"===e.overlayAction?[n("DeleteFile",{attrs:{exit:e.hideOverlay,refresh:e.refreshGame,file:e.modalItem,task:e.modalItem.parent}})]:e._e()],2),n("vue-context",{ref:"menu",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return[null!==a&&void 0!==a?["assignment"===a.type?[n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Edit assignment",a)}}},[e._v(" Edit assignment ")])]),n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Create task",a)}}},[e._v(" Create task ")])])]:e._e(),"task"===a.type?[n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Edit task",a)}}},[e._v(" Edit task ")])]),n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Delete task",a)}}},[e._v(" Delete task ")])]),n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Create file",a)}}},[e._v(" Create file ")])])]:e._e(),"file"===a.type?[n("li",[n("a",{on:{click:function(t){return t.preventDefault(),e.onClick("Delete file",a)}}},[e._v(" Delete file ")])])]:e._e()]:e._e()]}}])}),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-treeview",{attrs:{activatable:"",dense:"",hoverable:"",items:e.assignments,"return-object":"",active:e.active},on:{"update:active":[function(t){e.active=t},function(t){return e.activeChanged(e.active)}]},scopedSlots:e._u([{key:"prepend",fn:function(t){var a=t.item,r=t.open;return[a.isDirectory?n("v-icon",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(r?"mdi-folder-open":"mdi-folder")+" ")]):n("v-icon",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(e.fileTypes[e.extensionRegex.exec(a.name)[1]])+" ")])]}},{key:"label",fn:function(t){var a=t.item;return[n("v-list-item-title",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,a)}}},[e._v(" "+e._s(a.name)+" ")])]}}])})],1),n("v-col",{attrs:{cols:"8"}},[n("v-card",{staticClass:"sticky",attrs:{tile:"",elevation:"2"}},[n("FileEditor",{ref:"fileEditor",staticClass:"editorWrapper",attrs:{service:e.service}})],1)],1)],1)],1)}),J=[],K=(n("4160"),n("159b"),n("899b")),M=(n("f89b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("h3",{staticClass:"text-center mb-3"},[e._v("Create assignment")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:"",rules:[e.notEmpty]},model:{value:e.displayName,callback:function(t){e.displayName=t},expression:"displayName"}}),n("v-text-field",{attrs:{label:"Filesystem name",required:"",rules:[e.notEmpty,e.noSpaces]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{label:"Points",rules:[e.notEmpty,e.noSpaces,e.positive]},model:{value:e.points,callback:function(t){e.points=t},expression:"points"}}),n("v-text-field",{attrs:{label:"Challenge points",rules:[e.notEmpty,e.noSpaces,e.positive]},model:{value:e.challengePoints,callback:function(t){e.challengePoints=t},expression:"challengePoints"}}),n("v-checkbox",{attrs:{label:"Active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}}),n("div",{staticClass:"d-flex justify-space-between mt-5"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.create}},[e._v("Create")])],1)],1)],1)}),U=[],q=(n("c975"),{name:"CreateAssignment",props:{refresh:Function,exit:Function},data:function(){return{isProcessing:!1,name:"",displayName:"",active:!0,points:0,challengePoints:0,valid:!1,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},positive:function(e){return(e||-1)>0||"Number must not be negative"}}},methods:{create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=createAssignment",{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,displayName:e.displayName,points:e.points,challengePoints:e.challengePoints,active:e.active})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Create assignment",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Create assignment",text:"Assignment ".concat(e.displayName," created.")});case 15:case"end":return t.stop()}}),t)})))()}}}),z=q,H=n("b0af"),W=n("ac7c"),X=n("4bd4"),Q=n("8654"),Y=Object(d["a"])(z,M,U,!1,null,"1770d1e6",null),Z=Y.exports;p()(Y,{VBtn:f["a"],VCard:H["a"],VCheckbox:W["a"],VForm:X["a"],VTextField:Q["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("h3",{staticClass:"text-center mb-3"},[e._v("Edit assignment")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:"",rules:[e.notEmpty]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{label:"Points",rules:[e.nonNegative,e.notEmpty]},model:{value:e.points,callback:function(t){e.points=t},expression:"points"}}),n("v-text-field",{attrs:{label:"Challenge points",rules:[e.nonNegative,e.notEmpty]},model:{value:e.challengePoints,callback:function(t){e.challengePoints=t},expression:"challengePoints"}}),n("v-checkbox",{attrs:{label:"Active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}}),n("div",{staticClass:"d-flex justify-space-between mt-5"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Update")])],1)],1)],1)},te=[],ne={name:"EditAssignment",props:{assignment:Object,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,name:"",points:0,challengePoints:0,active:!1,valid:!1,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},nonNegative:function(e){return(e||-1)>=0||"Number must not be negative"}}},mounted:function(){this.name=this.assignment.name,this.points=this.assignment.data.points,this.challengePoints=this.assignment.data.challengePoints,this.active=this.assignment.data.active},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=editAssignment?assignmentId=".concat(e.assignment.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,points:e.points,challengePoints:e.challengePoints,active:e.active})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Edit assignment",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Edit assignment",text:"Assignment ".concat(e.name," updated.")});case 15:case"end":return t.stop()}}),t)})))()}}},ae=ne,re=Object(d["a"])(ae,ee,te,!1,null,"e28f971a",null),se=re.exports;p()(re,{VBtn:f["a"],VCard:H["a"],VCheckbox:W["a"],VForm:X["a"],VTextField:Q["a"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("v-card-title",{staticClass:"text-center"},[e._v("Create task")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:"",rules:[e.notEmpty]},model:{value:e.displayName,callback:function(t){e.displayName=t},expression:"displayName"}}),n("v-text-field",{attrs:{label:"Filesystem name",rules:[e.notEmpty,e.noSpaces],required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-select",{attrs:{label:"Category",items:e.categories,rules:[e.isSelected],"item-text":"name","return-object":""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("v-textarea",{attrs:{label:"Hint"},model:{value:e.hint,callback:function(t){e.hint=t},expression:"hint"}}),n("v-card-actions",{staticClass:"justify-space-between"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.create}},[e._v("Create")])],1)],1)],1)},oe=[],ce={name:"CreateTask",props:{assignment:Object,categories:Array,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,valid:!1,name:"",displayName:"",hint:"",selected:void 0,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},isSelected:function(e){return void 0!==e||"Number must not be negative"}}},methods:{create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=createTask&assignmentId=".concat(e.assignment.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,displayName:e.displayName,category:e.selected.id,hint:e.hint})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Create task",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Create task",text:"Task ".concat(e.displayName," created.")});case 15:case"end":return t.stop()}}),t)})))()}}},ue=ce,le=n("99d9"),de=n("b974"),me=n("a844"),pe=Object(d["a"])(ue,ie,oe,!1,null,"5c0a22d6",null),fe=pe.exports;p()(pe,{VBtn:f["a"],VCard:H["a"],VCardActions:le["a"],VCardTitle:le["d"],VForm:X["a"],VSelect:de["a"],VTextField:Q["a"],VTextarea:me["a"]});var ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("h3",{staticClass:"text-center mb-3"},[e._v("Edit task")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:"",rules:[e.notEmpty]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-select",{attrs:{label:"Category",items:e.categories,"item-text":"name",rules:[e.isSelected],"return-object":""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("v-textarea",{attrs:{label:"Hint"},model:{value:e.hint,callback:function(t){e.hint=t},expression:"hint"}}),n("div",{staticClass:"d-flex justify-space-between mt-5"},[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Update")])],1)],1)],1)},he=[],ge=(n("13d5"),{name:"EditTask",props:{assignment:Object,task:Object,categories:Array,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,name:"",hint:"",selected:void 0,valid:!1,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"},noSpaces:function(e){return(e||"").indexOf(" ")<0||"No spaces are allowed"},isSelected:function(e){return void 0!==e||"Number must not be negative"}}},mounted:function(){var e=this;this.name=this.task.name,this.hint=this.task.data.hint;var t=this.categories.reduce((function(t,n){return n.id===e.task.data.category&&(t=n),t}),void 0);void 0===t&&(t=this.categories[0]),this.selected=t},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=editTask&taskId=".concat(e.task.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,category:e.selected.id,hint:e.hint})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Edit task",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Edit task",text:"Task ".concat(e.name," updated.")});case 15:case"end":return t.stop()}}),t)})))()}}}),be=ge,xe=Object(d["a"])(be,ve,he,!1,null,"657d0650",null),ye=xe.exports;p()(xe,{VBtn:f["a"],VCard:H["a"],VForm:X["a"],VSelect:de["a"],VTextField:Q["a"],VTextarea:me["a"]});var ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("v-overlay",{attrs:{value:e.showOverlay}},[e.loading?n("v-progress-circular",{staticClass:"position-absolute",attrs:{size:180,width:7,color:"purple",indeterminate:""}}):e._e(),n("v-btn",{on:{click:e.closeGenerator}},[e._v("Close")]),n("v-card",{ref:"autotestGeneratorRef",attrs:{id:"autotestGeneratorId",height:"80vh",width:"80vw"}})],1),"none"===e.editable.type?n("v-card",{staticClass:"inner-tile",attrs:{tile:""}},[n("v-card-title",[e._v("Select a file")])],1):"html"===e.editable.type?n("v-card",{staticClass:"inner-tile",attrs:{tile:""}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.file.name))]),n("v-spacer"),n("v-checkbox",{attrs:{label:"Binary"},model:{value:e.binary,callback:function(t){e.binary=t},expression:"binary"}}),n("v-spacer"),n("v-checkbox",{attrs:{label:"Show"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),n("v-spacer"),n("v-btn",{on:{click:function(t){return e.save()}}},[e._v("Save")])],1),n("div",[n("editor",{ref:"toaster",attrs:{options:e.editorOptions,height:"75vh"}})],1)],1):e.rawEditorFileExtensions.includes(e.editable.type)?n("v-card",{attrs:{tile:""}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.file.name))]),n("v-spacer"),n("v-checkbox",{attrs:{label:"Binary"},model:{value:e.binary,callback:function(t){e.binary=t},expression:"binary"}}),n("v-spacer"),n("v-checkbox",{attrs:{label:"Show"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),n("v-spacer"),"autotest2"===e.editable.type?n("v-btn",{on:{click:e.openGenerator}},[e._v("Open generator")]):e._e(),n("v-spacer"),n("v-btn",{attrs:{disabled:e.isSaving},on:{click:function(t){return e.save()}}},[e._v("Save")])],1),n("div",[n("codemirror",{ref:"mirror",attrs:{options:e.cmOptions,id:"codemirror"},model:{value:e.fileContent,callback:function(t){e.fileContent=t},expression:"fileContent"}})],1)],1):e._e()],1)},we=[],Ce=(n("99af"),n("ac1f"),n("b85c")),_e=(n("2791"),n("4ba6"),n("f9d4"),n("b866"),n("8f94")),je=(n("10b2"),n("f513"),n("fe5f"),n("4ede")),Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{tile:"",height:"100%",width:"100%"}},[n("iframe",{attrs:{id:"generator-frame",src:e.autotestSrc,width:"100%",height:"100%"}})])},Ae=[],Ve=n("53ca"),Ee={name:"GeneratorFrame",props:{config:Object(Ve["a"])(""),save:Function},data:function(){return{autotestSrc:window.location.origin+"/panel/assets/autotestGenerator/html/index.html"}},created:function(){window.localStorage.setItem(".autotest-content",this.config)},mounted:function(){var e,t=null===(e=document.getElementById("generator-frame"))||void 0===e?void 0:e.contentWindow;t&&t.localStorage.setItem(".autotest-content",this.config),this.registerListener()},methods:{registerListener:function(){var e,t=this,n=null===(e=document.getElementById("generator-frame"))||void 0===e?void 0:e.contentWindow.document.getElementById("export-button");null===n||void 0===n?setTimeout((function(){t.registerListener()}),1e3):n.addEventListener("click",(function(){t.saveClicked()}))},saveClicked:function(){this.save(localStorage.getItem(".autotest-content"))}}},Ie=Ee,Se=Object(d["a"])(Ie,Oe,Ae,!1,null,"170f4d15",null),Pe=Se.exports;p()(Se,{VCard:H["a"]});var Te={name:"FileEditor",props:{service:Object},components:{codemirror:_e["codemirror"],Editor:je["Editor"]},data:function(){return{loading:!1,showOverlay:!1,binary:!1,show:!0,fileContent:"",file:void 0,extensionRegex:/(?:\.([^.]+))?$/,editorOptions:{hideModeSwitch:!1},modes:{c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",json:"application/json",javascript:"text/javascript",typescript:"text/typescript"},cmOptions:{tabSize:4,mode:"text/x-csrc",theme:"idea",lineNumbers:!0,line:!0,autoCloseBrackets:!0,viewportMargin:1/0},rawEditorFileExtensions:["c","cpp","java","js","mat","php","autotest","zadaca","json","txt","autotest2"],isSaving:!1}},computed:{editable:function(){return this.file&&!this.file.isDirectory?{type:this.extensionRegex.exec(this.file.name)[1]}:{type:"none"}}},methods:{openGenerator:function(){var e=this;if("autotest2"===this.editable.type){var t=this.fileContent;this.file&&this.file.parent&&this.file.parent.parent&&""===t&&(t={id:this.file.parent.scrapedId,name:"Game, "+this.file.parent.parent.name+", "+this.file.parent.name,languages:[],tools:{},tests:[]},t=JSON.stringify(t));var n=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var a,r,s,i,o,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/services/uup_game.php?action=editTaskFile&taskId=".concat(e.file.parent.scrapedId),{method:"put",headers:{Accept:"application/json"},body:JSON.stringify({name:e.file.name,content:n})});case 2:return a=t.sent,t.next=5,a.json();case 5:r=t.sent,e.isSaving=!1,r.success?(e.$notify({type:"good",group:"main",title:"Save file",text:"Autotests updated"}),s=JSON.parse(n),s=JSON.stringify(s,null,4),e.fileContent=s):e.$notify({type:"bad",group:"main",title:"Save file",text:"".concat(r.message||"An error has occurred.")}),e.showOverlay=!1,i=document.getElementById("autotestGeneratorId"),o=i.childNodes,c=Object(Ce["a"])(o);try{for(c.s();!(u=c.n()).done;)l=u.value,i.removeChild(l)}catch(d){c.e(d)}finally{c.f()}case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=r["default"].extend(Pe),i=new s({propsData:{save:n,config:t}});i.$mount(),this.showOverlay=!0,this.loading=!0,this.insertGenerator(i.$el)}},insertGenerator:function(e){var t=this,n=this.$refs.autotestGeneratorRef;void 0===n?setTimeout((function(){t.insertGenerator(e)}),1e3):(n.$el.appendChild(e),this.loading=!1)},closeGenerator:function(){this.showOverlay=!1;var e,t=document.getElementById("autotestGeneratorId"),n=t.childNodes,a=Object(Ce["a"])(n);try{for(a.s();!(e=a.n()).done;){var r=e.value;t.removeChild(r)}}catch(s){a.e(s)}finally{a.f()}},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSaving=!0,n="",e.$refs.toaster?n=e.$refs.toaster.invoke("getHtml"):e.$refs.mirror&&(n=e.fileContent),t.next=5,fetch("/services/uup_game.php?action=editTaskFile&taskId=".concat(e.file.parent.scrapedId),{method:"put",headers:{Accept:"application/json"},body:JSON.stringify({name:e.file.name,content:n,show:e.show,binary:e.binary})});case 5:return a=t.sent,t.next=8,a.json();case 8:if(r=t.sent,e.isSaving=!1,r.success){t.next=13;break}return e.$notify({type:"bad",group:"main",title:"Save file",text:"".concat(r.message||"An error has occurred.")}),t.abrupt("return",!1);case 13:e.$notify({type:"good",group:"main",title:"Save file",text:"File /".concat(e.file.parent.parent.name,"/").concat(e.file.parent.name,"/").concat(e.file.name," saved.")});case 14:case"end":return t.stop()}}),t)})))()},refresh:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$refs.toaster&&t.$refs.toaster.invoke("height","75vh"),t.file=e,!t.file||!t.file.parent){n.next=14;break}return n.next=5,fetch("/services/uup_game.php?action=getTaskFileContent&taskId=".concat(t.file.parent.scrapedId,"&name=").concat(t.file.name),{method:"get",headers:{Accept:"application/json"}});case 5:return a=n.sent,n.next=8,a.json();case 8:if(r=n.sent,r.success){n.next=11;break}return n.abrupt("return",!1);case 11:t.$refs.toaster?t.$refs.toaster.invoke("setHtml",r.data.content):t.$refs.mirror&&(t.fileContent=r.data.content),t.binary=t.file.data.binary,t.show=t.file.data.show;case 14:["autotest","zadaca","json","autotest2"].includes(t.extensionRegex.exec(e.name)[1])?(t.cmOptions.mode=t.modes.json,t.fileContent=JSON.stringify(JSON.parse(t.fileContent),null,4)):["c"].includes(t.extensionRegex.exec(e.name)[1])?t.cmOptions.mode=t.modes.c:["cpp"].includes(t.extensionRegex.exec(e.name)[1])?t.cmOptions.mode=t.modes.cpp:["java"].includes(t.extensionRegex.exec(e.name)[1])?t.cmOptions.mode=t.modes.java:["js"].includes(t.extensionRegex.exec(e.name)[1])?t.cmOptions.mode=t.modes.javascript:["ts"].includes(t.extensionRegex.exec(e.name)[1])&&(t.cmOptions.mode=t.modes.typescript);case 15:case"end":return n.stop()}}),n)})))()}}},$e=Te,Ne=(n("46de"),n("a797")),Fe=n("490a"),Re=Object(d["a"])($e,ke,we,!1,null,"04a7b595",null),De=Re.exports;p()(Re,{VBtn:f["a"],VCard:H["a"],VCardTitle:le["d"],VCheckbox:W["a"],VOverlay:Ne["a"],VProgressCircular:Fe["a"],VSpacer:C["a"]});var Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Delete task")]),n("v-card-subtitle",[e._v("/"+e._s(e.task.parent.name)+"/"+e._s(e.task.name))]),n("v-card-text",[e._v("Are you sure you want to delete this task?")]),n("v-card-actions",[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Delete")])],1)],1)},Be=[],Le={name:"DeleteTask",props:{task:Object,exit:Function,refresh:Function},data:function(){return{isProcessing:!1}},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isProcessing=!0,t.next=3,fetch("/services/uup_game.php?action=deleteTask&taskId=".concat(e.task.scrapedId),{method:"delete",headers:{Accept:"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,e.isProcessing=!1,a.success){t.next=11;break}return e.$notify({type:"bad",group:"main",title:"Delete task",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 11:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Delete task",text:"Task ".concat(e.task.name," deleted.")});case 14:case"end":return t.stop()}}),t)})))()}}},Je=Le,Ke=Object(d["a"])(Je,Ge,Be,!1,null,"31dc38a7",null),Me=Ke.exports;p()(Ke,{VBtn:f["a"],VCard:H["a"],VCardActions:le["a"],VCardSubtitle:le["b"],VCardText:le["c"],VCardTitle:le["d"]});var Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Delete file")]),n("v-card-subtitle",[e._v("/"+e._s(e.task.parent.name)+"/"+e._s(e.task.name)+"/"+e._s(e.file.name))]),n("v-card-text",[e._v("Are you sure you want to delete this file?")]),n("v-card-actions",[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.submit}},[e._v("Delete")])],1)],1)},qe=[],ze={name:"DeleteFile",props:{task:Object,file:Object,refresh:Function,exit:Function},data:function(){return{isProcessing:!1}},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isProcessing=!0,t.next=3,fetch("/services/uup_game.php?action=deleteTaskFile&taskId=".concat(e.task.scrapedId,"&name=").concat(e.file.name),{method:"delete",headers:{Accept:"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,e.isProcessing=!1,a.success){t.next=11;break}return e.$notify({type:"bad",group:"main",title:"Delete file",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 11:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Delete file",text:"File ".concat(e.name," deleted.")});case 14:case"end":return t.stop()}}),t)})))()}}},He=ze,We=Object(d["a"])(He,Ue,qe,!1,null,"55361c1f",null),Xe=We.exports;p()(We,{VBtn:f["a"],VCard:H["a"],VCardActions:le["a"],VCardSubtitle:le["b"],VCardText:le["c"],VCardTitle:le["d"]});var Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-5 px-8",attrs:{dark:""}},[n("v-card-title",[e._v("Create file")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",rules:[e.notEmpty]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-checkbox",{attrs:{label:"Show"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),n("v-checkbox",{attrs:{label:"Binary"},model:{value:e.binary,callback:function(t){e.binary=t},expression:"binary"}})],1),n("v-card-actions",[n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.exit}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.isProcessing},on:{click:e.create}},[e._v("Create")])],1)],1)},Ye=[],Ze={name:"CreateFile",props:{task:Object,refresh:Function,exit:Function},data:function(){return{isProcessing:!1,valid:!1,binary:!1,show:!0,notEmpty:function(e){return(e||"").length>0||"This field cannot be empty"}}},methods:{create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.valid){t.next=15;break}return e.isProcessing=!0,t.next=4,fetch("/services/uup_game.php?action=createTaskFile&taskId=".concat(e.task.scrapedId),{method:"post",headers:{Accept:"application/json"},body:JSON.stringify({name:e.name,show:e.show,binary:e.binary,content:""})});case 4:return n=t.sent,t.next=7,n.json();case 7:if(a=t.sent,e.isProcessing=!1,a.success){t.next=12;break}return e.$notify({type:"bad",group:"main",title:"Create file",text:"".concat(a.message||"An error has occurred.")}),t.abrupt("return",!1);case 12:e.refresh(),e.exit(),e.$notify({type:"good",group:"main",title:"Create file",text:"File ".concat(e.name," created.")});case 15:case"end":return t.stop()}}),t)})))()}}},et=Ze,tt=Object(d["a"])(et,Qe,Ye,!1,null,"dc139998",null),nt=tt.exports;p()(tt,{VBtn:f["a"],VCard:H["a"],VCardActions:le["a"],VCardTitle:le["d"],VCheckbox:W["a"],VForm:X["a"],VTextField:Q["a"]});var at={components:{CreateFile:nt,DeleteFile:Xe,DeleteTask:Me,FileEditor:De,EditTask:ye,CreateTask:fe,EditAssignment:se,CreateAssignment:Z,VueContext:K["a"]},name:"GameBuilder",data:function(){return{service:{name:"uup_game.php",actions:{getContent:"getTaskFileContent",saveContent:"editTaskFile"}},modalItem:void 0,overlay:!1,overlayAction:"",assignments:[],active:[],extensionRegex:/(?:\.([^.]+))?$/,fileTypes:{html:"mdi-language-html5",c:"mdi-language-c",cpp:"mdi-language-cpp",js:"mdi-nodejs",json:"mdi-code-json",md:"mdi-language-markdown",pdf:"mdi-file-pdf",png:"mdi-file-image",txt:"mdi-file-document-outline",autotest:"mdi-cog",autotest2:"mdi-cog",zadaca:"mdi-arrow-top-right-thick"},categories:[]}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshGame();case 2:case"end":return t.stop()}}),t)})))()},methods:{hideOverlay:function(){this.overlay=!1},showOverLay:function(){this.overlay=!0},activeChanged:function(e){this.file=void 0,0!==e.length&&this.treeItemClicked(e[0])},treeItemClicked:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.isDirectory||t.$refs.fileEditor.refresh(e);case 1:case"end":return n.stop()}}),n)})))()},onClick:function(e,t){this.overlayAction=e,this.modalItem=t,this.showOverLay()},fixIds:function(e,t){var n=this;e&&(null!==t&&(e.parent=t),"file"===e.type?e.id=e.path:(e.scrapedId=e.id,e.id=e.id+"."+e.type),e.children&&e.children.forEach((function(t){return n.fixIds(t,e)})))},refreshGame:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],a=[],t.next=4,fetch("/services/uup_game.php?action=getTaskCategories",{method:"get",headers:{Accept:"application/json"}});case 4:return r=t.sent,t.next=7,r.json();case 7:if(s=t.sent,s.success){t.next=10;break}return t.abrupt("return",!1);case 10:return a=s.data,t.next=13,fetch("/services/uup_game.php?action=getAssignments",{method:"get",headers:{Accept:"application/json"}});case 13:return r=t.sent,t.next=16,r.json();case 16:if(s=t.sent,s.success){t.next=19;break}return t.abrupt("return",!1);case 19:return n=s.data.children,n.forEach((function(t){return e.fixIds(t,null)})),e.assignments=n,e.categories=a,t.abrupt("return",!0);case 24:case"end":return t.stop()}}),t)})))()}}},rt=at,st=(n("94ed"),n("62ad")),it=n("0fd9"),ot=n("eb2a"),ct=Object(d["a"])(rt,L,J,!1,null,"0bc57358",null),ut=ct.exports;p()(ct,{VCard:H["a"],VCol:st["a"],VContainer:N["a"],VIcon:h["a"],VListItemTitle:y["c"],VOverlay:Ne["a"],VRow:it["a"],VTreeview:ot["a"]});var lt={name:"Dashboard",components:{GameBuilder:ut},data:function(){return{inTheGame:!1}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/services/uup_game.php?action=check");case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,console.log(a),a.success&&a.roles.includes("admin")&&console.log("yes"),e.inTheGame=a.success;case 9:case"end":return t.stop()}}),t)})))()}},dt=lt,mt=Object(d["a"])(dt,G,B,!1,null,null,null),pt=mt.exports;p()(mt,{VContainer:N["a"]});var ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-content",{staticClass:"grey darken-4"},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs9:"",sm7:"",md5:"",lg4:""}},[n("v-card",{staticClass:"pa-10 text-center",attrs:{light:""}},[n("v-card-title",[e._v("Log in to your account")]),n("v-form",{staticClass:"my-4"},[n("v-text-field",{attrs:{light:"",label:"Username","prepend-icon":"mdi-account"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{light:"",type:"password",label:"Password","prepend-icon":"mdi-lock"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{staticClass:"mt-6",attrs:{large:"",width:"100%",dark:""},on:{click:e.login}},[e._v(" Log in ")])],1),e.showError?n("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()],1)],1)],1)],1)],1)],1)},vt=[],ht={name:"Login",data:function(){return{showError:!1,errorMessage:"",username:void 0,password:void 0}},methods:{login:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.username,n=this.password,e.next=3,this.$store.dispatch("login",{username:t,password:n});case 3:if(a=e.sent,!0!==a.success){e.next=9;break}return e.next=7,this.$router.push({name:"Dashboard"});case 7:e.next=12;break;case 9:this.showError=!0,this.errorMessage=a.message,setTimeout((function(){return r.hideError()}),5e3);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideError:function(){this.showError=!1,this.errorMessage=""}}},gt=ht,bt=n("0798"),xt=n("0e8f"),yt=n("a722"),kt=Object(d["a"])(gt,ft,vt,!1,null,null,null),wt=kt.exports;p()(kt,{VAlert:bt["a"],VApp:V["a"],VBtn:f["a"],VCard:H["a"],VCardTitle:le["d"],VContainer:N["a"],VContent:E["a"],VFlex:xt["a"],VForm:X["a"],VLayout:yt["a"],VTextField:Q["a"]});var Ct=n("2f62"),_t=n("5530"),jt={state:{userId:void 0,sessionId:void 0,profile:{}},mutations:{setUserId:function(e,t){e.userId=t},setSessionId:function(e,t){e.sessionId=t},setProfile:function(e,t){e.profile=Object(_t["a"])(Object(_t["a"])({},e.profile),t)}},getters:{isAuthenticated:function(e){return void 0!==e.sessionId},userProfile:function(e){return e.profile}},actions:{login:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.username,r=n.password,e.next=3,fetch("/services/auth.php",{method:"post",body:"login=".concat(encodeURIComponent(a),"&password=").concat(encodeURIComponent(r)),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});case 3:return s=e.sent,e.next=6,s.json();case 6:if(i=e.sent,!0!==i.success&&"true"!==i.success||"admin"!==i.role&&"sysadmin"!==i.role){e.next=21;break}return t.commit("setUserId",1),t.commit("setSessionId",i["sid"]),t.commit("setProfile",{username:a,realName:""}),e.next=13,fetch("/services/users.php?user=".concat(a),{method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});case 13:return o=e.sent,e.next=16,o.json();case 16:return c=e.sent,!0!==c.success&&"true"!==c.success||t.commit("setProfile",{realName:c.data.realname}),e.abrupt("return",{success:i.success});case 21:return i.success&&"student"===i.role&&(i.message="Nedozvoljen pristup"),e.abrupt("return",{success:!1,message:i.message});case 23:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/services/refresh.php");case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,!0!==a.success&&"true"!==a.success||"admin"!==a.role&&"sysadmin"!==a.role){e.next=20;break}return t.commit("setUserId",1),t.commit("setSessionId",a["sid"]),t.commit("setProfile",{username:a.username,realName:""}),e.next=12,fetch("/services/users.php?user=".concat(a.username),{method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});case 12:return r=e.sent,e.next=15,r.json();case 15:return s=e.sent,!0!==s.success&&"true"!==s.success||t.commit("setProfile",{realName:s.data.realname}),e.abrupt("return",{success:a.success});case 20:return a.success&&"student"===a.role&&(a.message="Nedozvoljen pristup"),e.abrupt("return",{success:!1,message:a.message});case 22:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},Ot=(n("4de4"),n("3835")),At={state:{courses:[]},mutations:{setCourses:function(e,t){e.courses=t},updateCourse:function(e,t){var n=Object(Ot["a"])(t,3),a=n[0],r=n[1],s=n[2],i=e.courses.filter((function(e){return e.id===a}));0!==i.length&&(i[0].groups=r.groups,s.$forceUpdate())}},getters:{courses:function(e){return e.courses},courseById:function(e){return function(t){var n;return null===(n=e.courses)||void 0===n?void 0:n.filter((function(e){return e.id+""===t}))[0]}},groupsForCourseId:function(e){return function(t){var n;return(null===(n=e.courses)||void 0===n?void 0:n.filter((function(e){return e.id===t}))[0].groups)||[]}},membersOfGroupByGroupIdAndCourseId:function(e){return function(t,n){var a,r;return(null===(a=e.courses)||void 0===a||null===(r=a.filter((function(e){return e.id===t}))[0].groups)||void 0===r?void 0:r.filter((function(e){return e.id===n}))[0].members)||{}}}},actions:{refreshMembers:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var r,s,i,o,c,u,l,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=Object(Ot["a"])(t,2),s=r[0],i=r[1],o=Object(Ce["a"])(s.groups||[]),a.prev=2,o.s();case 4:if((c=o.n()).done){a.next=18;break}return u=c.value,a.next=8,fetch("/services/courses.php?course_id=".concat(s.id,"&group_id=").concat(u.id,"&members"),{method:"get",headers:{Accept:"application/json"}});case 8:return l=a.sent,a.next=11,l.json();case 11:if(d=a.sent,d.success){a.next=15;break}return n.$notify({type:"bad",group:"main",title:"Getting members of ".concat(u.name," (").concat(s.name,")"),text:"".concat(d.message||"An error has occurred.")}),a.abrupt("return",!1);case 15:u.members=d.data.members;case 16:a.next=4;break;case 18:a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](2),o.e(a.t0);case 23:return a.prev=23,o.f(),a.finish(23);case 26:e.commit("updateCourse",[s.id,s,i]);case 27:case"end":return a.stop()}}),a,null,[[2,20,23,26]])})))()},refreshCourses:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,u,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("/services/courses.php",{method:"get",headers:{Accept:"application/json"}});case 2:return a=n.sent,n.next=5,a.json();case 5:if(r=n.sent,r.success){n.next=9;break}return t.$notify({type:"bad",group:"main",title:"Getting courses",text:"".concat(r.message||"An error has occurred.")}),n.abrupt("return",!1);case 9:s=r.data,i=Object(Ce["a"])(s),n.prev=11,i.s();case 13:if((o=i.n()).done){n.next=25;break}return c=o.value,u="/services/courses.php?course_id=".concat(c.id).concat(c.external?"&X":"","&year=").concat(c.year,"&groups"),n.next=18,fetch(u,{method:"get",headers:{Accept:"application/json"}});case 18:return l=n.sent,n.next=21,l.json();case 21:d=n.sent,d.success?c.groups=d.data.groups:t.$notify({type:"bad",group:"main",title:"Getting groups for ".concat(c.name),text:"".concat(d.message||"An error has occurred.")});case 23:n.next=13;break;case 25:n.next=30;break;case 27:n.prev=27,n.t0=n["catch"](11),i.e(n.t0);case 30:return n.prev=30,i.f(),n.finish(30);case 33:e.commit("setCourses",s);case 34:case"end":return n.stop()}}),n,null,[[11,27,30,33]])})))()}}},Vt={recursiveIdAddition:function(e,t){if(this.hasKey(e,"id")){if(this.hasKey(e,"children")){var n,a=Object(Ce["a"])(e.children);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.parent=e,this.recursiveIdAddition(r,t)}}catch(c){a.e(c)}finally{a.f()}}}else if(e.id=e.name+"_"+t.value,t.value=t.value+1,this.hasKey(e,"children")){var s,i=Object(Ce["a"])(e.children);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.parent=e,this.recursiveIdAddition(o,t)}}catch(c){i.e(c)}finally{i.f()}}},hasKey:function(e,t){return{}.hasOwnProperty.call(e,t)},getFullCourseId:function(e){return(e.external?"X":"")+e.id+"_"+e.year},tweakAssignmentTree:function(e){var t={value:1};return this.recursiveIdAddition(e,t),e}},Et={state:{assignments:{}},mutations:{setAssignments:function(e,t){e.assignments=t}},getters:{assignments:function(e){return e.assignments},assignmentById:function(e){return function(t){return e.assignments.filter((function(e){return e.id+""===t}))[0]}},assignmentsForCourse:function(e){return function(t){return e.assignments[Vt.getFullCourseId(t)]}}},actions:{refreshAssignments:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={},r=e.getters.courses,s=Object(Ce["a"])(r),n.prev=3,s.s();case 5:if((i=s.n()).done){n.next=16;break}return o=i.value,n.next=9,fetch("/services/assignments.php?action=getAssignments&course_id=".concat(o.id).concat(o.external?"&X":"","&year=").concat(o.year),{method:"get",headers:{Accept:"application/json"}});case 9:return c=n.sent,n.next=12,c.json();case 12:u=n.sent,u.success?a[Vt.getFullCourseId(o)]=Vt.tweakAssignmentTree(u.data):t.$notify({type:"bad",group:"main",title:"Getting assignments",text:"".concat(u.message||"An error has occurred.")});case 14:n.next=5;break;case 16:n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](3),s.e(n.t0);case 21:return n.prev=21,s.f(),n.finish(21);case 24:e.commit("setAssignments",a);case 25:case"end":return n.stop()}}),n,null,[[3,18,21,24]])})))()}}},It=(n("fb6a"),n("4f96")),St={state:{statistics:{}},mutations:{addCourse:function(e,t){Vt.hasKey(e.statistics,t)||(e.statistics[t]={})},addStudentToCourse:function(e,t){var n=t.course,a=t.student;Vt.hasKey(e.statistics,n)&&!Vt.hasKey(e.statistics[n],a)&&(e.statistics[n][a]={})},addInfoToCourseSubPath:function(e,t){var n=t.pathArray,a=t.student,r=t.info,s=n[0];if(Vt.hasKey(e.statistics,s)&&Vt.hasKey(e.statistics[s],a)){var i=e.statistics[s][a];if(i.path=s,n.length>1){var o,c=Object(It["a"])(n),u=c.slice(1),l=Object(Ce["a"])(u);try{for(l.s();!(o=l.n()).done;){var d=o.value;Vt.hasKey(i,"assignments")||(i.assignments={}),Vt.hasKey(i.assignments,d)||(i.assignments[d]={path:i.path+"/"+d}),i=i.assignments[d]}}catch(m){l.e(m)}finally{l.f()}}i.assignments=r.assignments,i.stats=r.stats,i.lastAccess=r.lastAccess}}},getters:{}};r["default"].use(Ct["a"]);var Pt=new Ct["a"].Store({state:{},mutations:{},actions:{},modules:{AuthStore:jt,CourseStore:At,AssignmentStore:Et,AssignmentProgressStore:St}});r["default"].use(P["a"]);var Tt=[{path:"/dashboard",name:"Dashboard",component:pt},{path:"/",name:"Dashboard",component:pt},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/login",name:"Login",component:wt},{path:"/courses",name:"Courses",component:function(){return n.e("chunk-7254f589").then(n.bind(null,"1a2f"))}},{path:"/courses/:course_id",name:"Course",component:function(){return n.e("chunk-72c803e5").then(n.bind(null,"9f72"))}},{path:"/courses/:course_id/groups/:group_id",name:"Group",component:function(){return n.e("chunk-2d0ccbaa").then(n.bind(null,"4ebe"))}},{path:"/assignments/:course_id",name:"Assignments",component:function(){return n.e("chunk-0453668e").then(n.bind(null,"5e25"))}},{path:"/statistics",name:"Statistics",component:function(){return n.e("chunk-2d237ec0").then(n.bind(null,"fcd1"))}},{path:"*",name:"NotFound",component:D}],$t=new P["a"]({mode:"history",base:"/panel/",routes:Tt});$t.beforeEach((function(e,t,n){"Login"===e.name||Pt.getters.isAuthenticated?n():n(wt)}));var Nt=$t,Ft=n("f309");r["default"].use(Ft["a"]);var Rt=new Ft["a"]({}),Dt=(n("d1e78"),n("ee98")),Gt=n.n(Dt);r["default"].use(Gt.a),r["default"].config.productionTip=!1;var Bt=void 0;Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pt.dispatch("refresh");case 2:Bt=new r["default"]({router:Nt,store:Pt,vuetify:Rt,render:function(e){return e(S)}}).$mount("#app"),Pt.app=Bt,Pt.$notify=Bt.$notify;case 5:case"end":return e.stop()}}),e)})))()},"5c0b":function(e,t,n){"use strict";var a=n("7694"),r=n.n(a);r.a},7694:function(e,t,n){},"94ed":function(e,t,n){"use strict";var a=n("b9b6"),r=n.n(a);r.a},b9b6:function(e,t,n){}});
//# sourceMappingURL=app.c6e3b71b.js.map